try (DestroyDialog Auto_emotion)catch()
rollout Auto_emotion "AutoEmotion_Tool" width:163 height:121
(
	button 'create_Dummy' "创建虚拟体" pos:[46,8] width:64 height:36 align:#left
	button 'create_Bone' "创建骨骼" pos:[46,42] width:64 height:36 align:#left
	button 'Create_Ctrl' "创建控制器" pos:[46,78] width:64 height:36 align:#left


	local PointNodeArray=#()
	fn MycreatePoint_fn =
	(
		local pointStore=#(--1--3 眉毛
					(matrix3 [0.913808,0.296351,0.277724] [-0.205384,-0.252747,0.945482] [0.350389,-0.921029,-0.170097] [2.26917,-9.70757,169.602]),
					(matrix3 [0.909103,0.416572,0] [0,-1.48112e-07,1] [0.416572,-0.909103,-1.62921e-07] [4.12891,-9.08163,169.941]),
					(matrix3 [0.661332,0.670352,-0.336554] [0.258166,0.217851,0.941218] [0.704266,-0.709345,-0.0289898] [5.68984,-7.96447,169.551]),
					--4--10 右眼
					(matrix3 [0.784893,-0.296463,0.544108] [-0.56972,0,0.821839] [-0.243645,-0.955044,-0.168901] [2.5127,-8.4932,167.869]),
					(matrix3 [0.997613,0.0690466,0] [0,-1.62532e-07,1] [0.0690466,-0.997613,-1.62921e-07] [3.75831,-8.70366,168.33]),
					(matrix3 [0.679498,0.414079,-0.605657] [0.665381,-2.38419e-07,0.746504] [0.309112,-0.910241,-0.275521] [4.66022,-8.3822,167.966]),
					(matrix3 [0.947066,0,0.32104] [-0.32104,-1.62921e-07,0.947066] [0,-1,-1.54297e-07] [1.94015,-8.44767,167.055]),
					(matrix3 [0.968,-0.250949,0] [0,-1.57707e-07,1] [-0.250949,-0.968,-1.62921e-07] [3.09348,-8.60105,166.898]),
					(matrix3 [0.937511,0.347955,0] [0,-1.5274e-07,1] [0.347955,-0.937511,-1.62921e-07] [4.14844,-8.48353,166.847]),
					(matrix3 [0.610365,0.79212,0] [1.29053e-07,0,1] [0.79212,-0.610365,-1.62921e-07] [5.13202,-7.91756,167.244]),
					--11--12 脸颊
					(matrix3 [0.54715,0.694542,-0.467159] [0.0833947,0.510102,0.856061] [0.83287,-0.507353,0.221181] [1.136,-9.9905,164.246]),
					(matrix3 [0.733501,0.679689,0] [0.154191,-0.166399,0.973928] [0.661968,-0.714377,-0.226856] [5.28517,-7.83472,164.771]),
					--13--17 嘴巴
					(matrix3 [0.831254,0.506779,-0.228456] [-0.0249355,0.444551,0.895407] [0.555334,-0.738613,0.382171] [1.11087,-9.91977,161.791]),
					(matrix3 [0.566953,0.804719,-0.176043] [0.0224618,0.198527,0.979838] [0.823444,-0.559477,0.0944801] [1.86779,-9.16523,161.666]),				
					(matrix3 [0.945629,0.286469,0.154016] [-0.1474,-0.0446536,0.988068] [0.289928,-0.957048,-1.60977e-07] [0.82999,-9.44749,160.964]),
					(matrix3 [0.66604,0.676109,0.315069] [-0.312321,-0.130805,0.940928] [0.677382,-0.725098,0.124042] [1.57575,-8.84546,161.142]),
					(matrix3 [0.890094,0.453893,0.0413923] [0.124884,-0.330222,0.935605] [0.438333,-0.827608,-0.350612] [2.29372,-8.49122,161.263]),
					--18--20 下巴部分
					(matrix3 [0.75618,0.634086,0.16164] [0.0770869,-0.331619,0.940259] [0.649808,-0.698544,-0.299643] [4.05568,-7.54896,161.724]),
					(matrix3 [0.113379,0.871408,0.477277] [0.279444,-0.488951,0.82634] [0.953445,0.0396824,-0.298946] [6.35584,-2.21292,161.82]),
					(matrix3 [0.778144,0.372765,0.505507] [-0.229685,-0.580208,0.781411] [0.584582,-0.724158,-0.365867] [1.97952,-8.04867,159.231]),
					--21--22鼻子
					(matrix3 [1,0,0] [0,0.441971,0.89703] [0,-0.89703,0.441971] [0,-9.65099,167.008]),
					(matrix3 [1,0,0] [0,0.452103,0.891966] [0,-0.891966,0.452103] [0,-10.0174,164.221]),
					--23--24 嘴巴人中
					(matrix3 [1,0,0] [0,0.40774,0.913098] [0,-0.913098,0.40774] [0,-10.3001,161.984]),
					(matrix3 [1,0,0] [0,-1.62921e-07,1] [0,-1,-1.62921e-07] [0,-9.42417,160.894]),

					--左脸
					--25--27眉毛
					(matrix3 [-0.661332,0.670352,-0.336554] [-0.258166,0.217851,0.941218] [-0.704266,-0.709344,-0.0289899] [-5.68984,-7.96447,169.551]),
					(matrix3 [-0.909103,0.416572,0] [0,0,1] [-0.416572,-0.909103,0] [-4.12891,-9.08163,169.941]),
					(matrix3 [-0.913808,0.296351,0.277724] [0.205384,-0.252747,0.945482] [-0.350389,-0.921029,-0.170097] [-2.26917,-9.70757,169.602]),
					--28--34眼睛
					(matrix3 [-0.679498,0.414079,-0.605657] [-0.665381,0,0.746504] [-0.309112,-0.910241,-0.27552] [-4.66022,-8.3822,167.966]),
					(matrix3 [-0.997613,0.0690468,0] [0,-3.13167e-07,1] [-0.0690468,-0.997613,-3.13916e-07] [-3.75831,-8.70366,168.33]),
					(matrix3 [-0.784892,-0.296463,0.544108] [0.56972,-3.60422e-07,0.821839] [0.243644,-0.955044,-0.168901] [-2.5127,-8.4932,167.869]),
					(matrix3 [-0.610365,0.79212,0] [0,0,1] [-0.79212,-0.610365,0] [-5.13202,-7.91756,167.244]),
					(matrix3 [-0.937511,0.347955,0] [0,0,1] [-0.347955,-0.937511,0] [-4.14844,-8.48353,166.847]),
					(matrix3 [-0.968,-0.250949,0] [0,-3.03871e-07,1] [0.250949,-0.968,-3.13916e-07] [-3.09348,-8.60105,166.898]),
					(matrix3 [-0.947066,0,0.32104] [0.32104,-3.03814e-07,0.947066] [0,-1,-2.97299e-07] [-1.94015,-8.44767,167.055]),
					--35--38脸颊
					(matrix3 [-0.733501,0.679689,0] [-0.154191,-0.166399,0.973928] [-0.661968,-0.714377,-0.226856] [-5.28517,-7.83472,164.771]),
					(matrix3 [-0.54715,0.694542,-0.467159] [-0.083395,0.510102,0.856062] [-0.83287,-0.507353,0.221181] [-1.136,-9.9905,164.246]),
					(matrix3 [-0.113379,0.871408,0.477277] [-0.279444,-0.488951,0.82634] [-0.953445,0.0396823,-0.298946] [-6.35584,-2.21292,161.82]),
					(matrix3 [-0.75618,0.634086,0.16164] [-0.0770869,-0.331619,0.940259] [-0.649808,-0.698544,-0.299643] [-4.05568,-7.54896,161.724]),
					--39--43嘴巴
					(matrix3 [-0.566953,0.804719,-0.176043] [-0.022462,0.198527,0.979838] [-0.823444,-0.559477,0.0944798] [-1.86779,-9.16523,161.666]),
					(matrix3 [-0.831254,0.506779,-0.228456] [0.0249356,0.444551,0.895406] [-0.555334,-0.738613,0.382171] [-1.11087,-9.91977,161.791]),
					(matrix3 [-0.890094,0.453893,0.0413924] [-0.124884,-0.330222,0.935605] [-0.438333,-0.827608,-0.350612] [-2.29372,-8.49122,161.263]),
					(matrix3 [-0.666039,0.676109,0.315069] [0.312322,-0.130805,0.940928] [-0.677382,-0.725098,0.124042] [-1.57575,-8.84546,161.142]),
					(matrix3 [-0.945629,0.286469,0.154016] [0.1474,-0.0446535,0.988068] [-0.289928,-0.957048,0] [-0.82999,-9.44749,160.964]),
					--下巴
					(matrix3 [-0.778144,0.372765,0.505507] [0.229685,-0.580208,0.781411] [-0.584582,-0.724158,-0.365867] [-1.97952,-8.04867,159.231])
				)--Arrayend

		if PointNodeArray[1] == undefined do
			(
				local TempDummmy=dummy boxsize:[1,1,1]
					TempDummmy.pos = [0,0,170]
					for i = 1 to pointStore.count do
					(
						PointNodeArray[i] = point transform:pointStore[i] size:1 box:true cross:false axistripod:true centermarker:false wirecolor:(color 255 255 0)
						PointNodeArray[i].rotation.controller=Euler_XYZ();
						PointNodeArray[i].postion.controller=Position_XYZ()

						if PointNodeArray[i].pos[1] < 0 do (PointNodeArray[i].wirecolor=(color 90 255 90))
						if PointNodeArray[i].pos[1] > 0 do (PointNodeArray[i].wirecolor=(color 90 90 255))
						if PointNodeArray[i].pos[1] == 0 do (PointNodeArray[i].wirecolor=(color 255 255 0))

						PointNodeArray[i].name = "Guide Point" + (i as string)
						PointNodeArray[i].parent=TempDummmy					
					)--end for
			)--end if
	)--fn end

	
	on create_Dummy pressed  do
	(
		MycreatePoint_fn()
	)--pressed end

)--rolloutend
CreateDialog Auto_emotion