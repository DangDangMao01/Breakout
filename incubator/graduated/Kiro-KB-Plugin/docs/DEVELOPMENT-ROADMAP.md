# Kiro KB 开发路线图

> 创建时间：2026-01-09  
> 核心目标：解决跨设备开发的一致性问题

---

## 🚨 当前最严重的问题

### v2.52.0 Bug 事件

**问题描述**：
- 上周五在另一台设备上继续开发
- AI 读取了上下文，但理解不完整
- 打包的 v2.52.0 出现了 v2.50.0 的 bug
- 侧边栏内容丢失
- 浪费了大量时间

**根本原因**：
1. AI 没有完整读取所有相关文件
2. 上下文恢复依赖手动操作，容易遗漏
3. 没有自动化的"检查点"机制
4. 代码变更没有和文档同步

**教训**：
- 跨设备开发必须有严格的流程
- AI 上下文恢复必须自动化
- 每次打包前必须有验证步骤

---

## 📋 开发计划表

### 🎯 战略转向（2026-01-28）

**重大决策**：从"通用插件"转向"硅基生命体基础架构"

**新的实施计划**：
1. **Phase 1**：完成 v3.1.0（知识图谱增强）- 1-2 周
2. **Phase 2**：转向 MVP（硅基生命体基础架构）- 1 个月
   - 基础重复检测
   - 手动 Skills 系统
   - AI 切换功能
   - Ollama 本地集成
   - 对话监控系统

**详细文档**：
- `QUICK-START-2026-01-28.md` - 快速开始指南
- `K_Kiro_Work/knowledge-base/discussions/20260128-硅基生命体战略转向-完整总结.md`
- `K_Kiro_Work/research/ai-philosophy/discussions/20260128-技术可行性分析-立即可做vs长期挑战.md`

---

### Phase 1：跨设备一致性（已完成 ✅）

**目标**：确保跨设备开发时 AI 思路一致，不再出现 v2.52.0 的问题

| 任务 | 优先级 | 预计时间 | 状态 |
|------|--------|----------|------|
| 1.1 创建自动化 Steering 规则 | P0 | 2小时 | ✅ 已完成 |
| 1.2 创建会话结束 Hook | P0 | 1小时 | ✅ 已完成 |
| 1.3 创建打包前检查清单 | P0 | 1小时 | ✅ 已完成 |
| 1.4 修复 v2.52.0 侧边栏 Bug | P0 | 2-3小时 | ✅ 已修复 |
| 1.5 创建代码-文档同步机制 | P1 | 2小时 | ⏳ |

**验收标准**：
- [ ] 新设备打开项目，AI 自动读取上下文
- [ ] 会话结束时自动保存状态
- [ ] 打包前有自动化检查
- [ ] v2.52.0 侧边栏正常工作

---

### Phase 2：手机端信息同步（下周）

**目标**：手机上看到的信息能便捷地保存到知识库

| 任务 | 优先级 | 预计时间 | 状态 |
|------|--------|----------|------|
| 2.1 设计 Telegram Bot 架构 | P1 | 1小时 | ⏳ |
| 2.2 实现 Bot 基础功能 | P1 | 4小时 | ⏳ |
| 2.3 实现 GitHub 自动同步 | P1 | 2小时 | ⏳ |
| 2.4 测试和部署 | P1 | 2小时 | ⏳ |

**验收标准**：
- [ ] 手机上发送链接给 Bot
- [ ] Bot 自动抓取内容并保存
- [ ] 电脑上 git pull 能看到新内容

---

### Phase 3：本地 AI 记忆（本月）

**目标**：实现真正的本地 AI 辅助，不依赖 Kiro IDE

| 任务 | 优先级 | 预计时间 | 状态 |
|------|--------|----------|------|
| 3.1 完善 ollama-cli 架构 | P2 | 2小时 | ⏳ |
| 3.2 实现知识库读取 | P2 | 3小时 | ⏳ |
| 3.3 实现智能问答 | P2 | 4小时 | ⏳ |
| 3.4 实现日报/周报生成 | P2 | 3小时 | ⏳ |

**验收标准**：
- [ ] 命令行运行 `ollama-cli ask "问题"`
- [ ] 自动读取知识库回答
- [ ] 能生成工作报告

---

### Phase 4：知识体系构建（持续）

**目标**：建立完整的个人知识框架

| 任务 | 优先级 | 预计时间 | 状态 |
|------|--------|----------|------|
| 4.1 定义知识分类体系 | P2 | 2小时 | ⏳ |
| 4.2 整理现有知识 | P2 | 持续 | ⏳ |
| 4.3 建立学习路径 | P2 | 持续 | ⏳ |
| 4.4 定期回顾机制 | P2 | 持续 | ⏳ |

---

### Phase 5：功能大简化（v2.54.0 规划）

**目标**：从 40 个命令减少到 6 个核心命令

**参考文档**：[功能架构图](./kiro-knowledge-base/docs/FEATURE-ARCHITECTURE.md)

| 任务 | 优先级 | 预计时间 | 状态 |
|------|--------|----------|------|
| 5.1 创建统一的"保存知识"命令 | P1 | 4小时 | ⏳ |
| 5.2 删除 35 个不常用命令 | P1 | 2小时 | ⏳ |
| 5.3 更新侧边栏显示领域分类 | P1 | 3小时 | ⏳ |
| 5.4 更新文档和帮助 | P1 | 2小时 | ⏳ |

**保留的核心功能**（6个）：
1. 保存知识 - 统一入口，自动检测领域
2. 搜索知识 - 全局搜索
3. 浏览知识 - 侧边栏（领域分类树）
4. 生成索引 - 自动生成 INDEX.md
5. 同步 - Git 同步
6. 设置知识库 - 首次设置向导

**预计时间**：1-2 天

---

## 🎯 Phase 1 详细计划

### 1.1 自动化 Steering 规则

**目标**：新会话自动读取上下文

**实现**：
```markdown
# .kiro/steering/auto-context-recovery.md
---
inclusion: always
---

# 自动上下文恢复

每次新会话开始时，必须先读取以下文件：

1. `SESSION-STATE.md` - 项目整体状态
2. 最近的 `kiro-knowledge-base/SESSION-*.md` - 最新会话记录
3. `kiro-knowledge-base/CHANGELOG.md` - 版本变更历史

读取后，向用户确认：
- 当前版本号
- 最近完成的工作
- 下一步计划

如果用户说"继续开发"，必须先确认上下文正确。
```

**预计时间**：2小时

---

### 1.2 会话结束 Hook

**目标**：会话结束时自动保存状态

**实现**：
```json
// .kiro/hooks/auto-save-session.json
{
  "name": "自动保存会话状态",
  "trigger": "onAgentComplete",
  "action": {
    "type": "message",
    "content": "会话即将结束。请更新 SESSION-STATE.md，记录：\n1. 今天完成的工作\n2. 当前代码状态\n3. 下一步计划\n4. 已知问题"
  }
}
```

**预计时间**：1小时

---

### 1.3 打包前检查清单

**目标**：每次打包前自动验证

**实现**：创建 `pre-package-checklist.md`

```markdown
# 打包前检查清单

## 必须检查项

### 1. 代码检查
- [ ] `npm run compile` 无错误
- [ ] `npm run lint` 无警告
- [ ] 所有新文件已导入到 extension.ts

### 2. 功能检查
- [ ] 侧边栏正常显示
- [ ] 所有命令可用
- [ ] 新功能测试通过

### 3. 版本检查
- [ ] package.json 版本号正确
- [ ] CHANGELOG.md 已更新
- [ ] RELEASE-NOTES 已创建

### 4. 上下文检查
- [ ] SESSION-STATE.md 已更新
- [ ] 所有相关文档已同步

## 打包命令
```bash
cd kiro-knowledge-base/extension
npm run compile
npm run package
```

## 验证命令
```bash
# 安装测试
code --install-extension kiro-knowledge-base-X.XX.X.vsix
# 重新加载窗口
# 检查侧边栏
```
```

**预计时间**：1小时

---

### 1.4 修复 v2.52.0 侧边栏 Bug

**目标**：确保侧边栏正常工作

**步骤**：
1. 检查当前 extension.ts 的导入
2. 对比 v2.51.0 和 v2.52.0 的差异
3. 找出丢失的代码
4. 修复并测试
5. 重新打包

**预计时间**：2-3小时

---

### 1.5 代码-文档同步机制

**目标**：代码变更时自动提醒更新文档

**实现**：
```json
// .kiro/hooks/code-doc-sync.json
{
  "name": "代码文档同步提醒",
  "trigger": "onFileSave",
  "filePattern": "**/*.ts",
  "action": {
    "type": "message",
    "content": "检测到代码变更。如果是重要功能变更，请同步更新：\n1. CHANGELOG.md\n2. SESSION-STATE.md\n3. 相关文档"
  }
}
```

**预计时间**：2小时

---

## 📊 时间线

### 本周（1月9日 - 1月12日）

| 日期 | 任务 | 预计时间 |
|------|------|----------|
| 1/9（今天） | 1.1 自动化 Steering 规则 | 2小时 |
| 1/9（今天） | 1.2 会话结束 Hook | 1小时 |
| 1/10 | 1.3 打包前检查清单 | 1小时 |
| 1/10 | 1.4 修复 v2.52.0 Bug | 2-3小时 |
| 1/11 | 1.5 代码-文档同步机制 | 2小时 |
| 1/12 | 测试和验证 | 2小时 |

### 下周（1月13日 - 1月19日）

| 日期 | 任务 | 预计时间 |
|------|------|----------|
| 1/13-14 | Phase 2: Telegram Bot | 8小时 |
| 1/15-16 | 测试和部署 | 4小时 |
| 1/17-19 | 缓冲时间 | - |

### 本月剩余

| 周 | 任务 |
|------|------|
| 第3周 | Phase 3: 本地 AI 记忆 |
| 第4周 | Phase 4: 知识体系构建 |

---

## ✅ 今天的行动

### 立即开始

1. **创建自动化 Steering 规则**（1.1）
   - 确保新会话自动读取上下文
   - 防止再次出现 v2.52.0 的问题

2. **创建会话结束 Hook**（1.2）
   - 确保每次会话结束都保存状态

3. **检查 v2.52.0 Bug**（1.4）
   - 找出侧边栏丢失的原因
   - 准备修复方案

---

## 📝 关键原则

### 跨设备开发原则

1. **先读后写**
   - 新设备上，先读取所有上下文
   - 确认理解正确后再开始开发

2. **小步提交**
   - 每完成一个小功能就提交
   - 不要积累大量变更

3. **打包前验证**
   - 每次打包前运行检查清单
   - 不要跳过任何步骤

4. **文档同步**
   - 代码变更必须同步文档
   - SESSION-STATE.md 是核心

### AI 协作原则

1. **明确上下文**
   - 告诉 AI 当前版本号
   - 告诉 AI 最近完成的工作
   - 告诉 AI 已知问题

2. **验证输出**
   - AI 生成的代码必须验证
   - 不要盲目信任

3. **记录决策**
   - 重要决策记录在文档中
   - 方便下次恢复

---

## 🎯 成功标准

### Phase 1 完成标准

- [ ] 新设备打开项目，AI 自动读取上下文并确认
- [ ] 会话结束时自动提醒保存状态
- [ ] 打包前有完整的检查流程
- [ ] v2.52.0 侧边栏正常工作
- [ ] 不再出现跨设备导致的代码问题

### 整体成功标准

- [ ] 跨设备开发流畅，无信息丢失
- [ ] 手机端信息能同步到知识库
- [ ] 本地 AI 能辅助工作
- [ ] 知识体系逐步完善

---

**创建时间**：2026-01-09  
**负责人**：用户 + Kiro AI  
**状态**：Phase 1 进行中
