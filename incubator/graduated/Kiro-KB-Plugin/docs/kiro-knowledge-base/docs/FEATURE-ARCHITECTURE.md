# Kiro KB 功能架构图

> 版本：v2.53.0
> 更新时间：2026-01-12

**📚 相关文档**：
- [功能详细清单](./FEATURE-DETAILED-LIST.md) - 40个命令的完整列表、使用频率分析、简化方案

---

## 🎯 核心功能（必须保留）

### 1. 保存知识
**目标**：让用户能快速保存 Kiro 对话和其他知识

**当前实现**：
- ❌ `saveQuestion` - 暂存问题到 backlog（临时）
- ❌ `captureContent` - 智能捕获（不常用）
- ❌ `summarizeAndSave` - AI总结保存（不常用）
- ❌ `createFromTemplate` - 从模板创建（不常用）

**问题**：4 个命令，用户不知道用哪个

**建议**：
- ✅ 合并为 1 个命令：`Kiro KB: Save Knowledge`
- 流程：输入内容 → 自动检测领域 → 选择分类 → 保存

---

### 2. 搜索知识
**目标**：快速找到已保存的知识

**当前实现**：
- ✅ `quickSearch` - 快速搜索（常用）
- ❌ `searchAllKnowledge` - 全局搜索（重复）
- ❌ `searchInPanel` - 面板搜索（重复）

**问题**：3 个搜索命令，功能重叠

**建议**：
- ✅ 保留 `quickSearch`，删除其他 2 个
- 或者合并为 1 个统一的搜索界面

---

### 3. 浏览知识
**目标**：在侧边栏浏览知识库

**当前实现**：
- ✅ 侧边栏（simplifiedPanel.ts）
- ✅ 显示最近更新、收藏、标签
- ❌ 不显示 domains/ 分类（v2.53.0 新增）

**问题**：侧边栏不显示新的领域分类

**建议**：
- ✅ 添加领域分类树视图
- ✅ 保持简洁，不要太多层级

---

## 🔧 辅助功能（可选保留）

### 4. 知识管理
**目标**：整理和优化知识库

**当前实现**：
- ✅ `generateIndex` - 生成索引（常用）
- ❌ `smartClassify` - 智能分类（不常用）
- ❌ `batchClassify` - 批量分类（不常用）
- ❌ `checkSimilar` - 检测相似内容（不常用）
- ❌ `normalizeAllTags` - 标签规范化（不常用）

**建议**：
- ✅ 保留 `generateIndex`
- ❌ 删除其他 4 个（或合并为 1 个"整理知识库"命令）

---

### 5. 知识分析
**目标**：了解知识库状态

**当前实现**：
- ❌ `generateReport` - 生成分析报告（不常用）
- ❌ `assessQuality` - 质量评估（不常用）
- ❌ `batchAssessQuality` - 批量质量评估（不常用）
- ❌ `showGraph` - 知识关联图（不常用）
- ❌ `buildGraph` - 构建知识图谱（不常用）
- ❌ `showRecommendations` - 相关推荐（不常用）
- ❌ `smartRecommend` - 智能推荐（不常用）

**问题**：7 个分析命令，功能重叠，很少使用

**建议**：
- ❌ 全部删除，或合并为 1 个"知识库统计"命令
- 只显示基本统计（文件数、最近更新）

---

### 6. 标签管理
**目标**：管理知识标签

**当前实现**：
- ❌ `tagManager` - 标签管理器（不常用）
- ❌ `renameTag` - 重命名标签（不常用）
- ❌ `mergeTag` - 合并标签（不常用）
- ❌ `deleteTag` - 删除标签（不常用）

**建议**：
- ❌ 删除独立的标签管理功能
- ✅ 在侧边栏直接管理标签（右键菜单）

---

### 7. 导出和同步
**目标**：备份和跨设备同步

**当前实现**：
- ✅ `sync` - 同步到中央仓库（常用）
- ❌ `exportKnowledge` - 导出知识（不常用）
- ❌ `exportFile` - 导出此文件（不常用）
- ❌ `gitSync` - Git 同步（重复）
- ❌ `gitPush` - Git 推送（重复）
- ❌ `gitPull` - Git 拉取（重复）

**建议**：
- ✅ 保留 `sync`（自动处理 Git）
- ❌ 删除其他 5 个

---

### 8. 其他功能
**当前实现**：
- ❌ `reviewStale` - 复查过期知识（不常用）
- ❌ `markReviewed` - 标记已复查（不常用）
- ❌ `analyzeCleanup` - 清理分析（不常用）
- ❌ `archiveFiles` - 归档文件（不常用）
- ❌ `showHistory` - 显示历史（不常用）
- ❌ `showProjectContext` - 项目上下文（不常用）
- ❌ `insertLinkFromContextMenu` - 插入链接（不常用）
- ❌ `addToFavorites` - 添加到收藏（侧边栏已有）
- ❌ `removeFromFavorites` - 从收藏移除（侧边栏已有）

**建议**：
- ❌ 全部删除

---

## 📊 功能统计

| 类别 | 当前命令数 | 建议保留 | 建议删除 |
|------|-----------|---------|---------|
| 核心功能 | 7 | 3 | 4 |
| 知识管理 | 5 | 1 | 4 |
| 知识分析 | 7 | 0 | 7 |
| 标签管理 | 4 | 0 | 4 |
| 导出同步 | 6 | 1 | 5 |
| 其他功能 | 11 | 0 | 11 |
| **总计** | **40** | **5** | **35** |

---

## 🎯 简化后的功能架构

### 核心功能（3个）

1. **保存知识** - `Kiro KB: Save Knowledge`
   - 统一入口，自动检测领域
   - 支持快速保存和详细保存

2. **搜索知识** - `Kiro KB: Quick Search`
   - 全局搜索，支持标签、内容、文件名

3. **浏览知识** - 侧边栏
   - 领域分类树
   - 最近更新
   - 收藏夹
   - 标签列表

### 辅助功能（2个）

4. **生成索引** - `Kiro KB: Generate Index`
   - 自动生成 INDEX.md

5. **同步** - `Kiro KB: Sync`
   - 自动处理 Git 同步

### 设置（1个）

6. **设置知识库** - `Kiro KB: Setup`
   - 首次设置向导
   - 重新选择工作方向

---

## 🚀 实施计划

### v2.54.0 - 大简化版本

**目标**：从 40 个命令减少到 6 个

**步骤**：
1. 创建统一的"保存知识"命令
2. 删除 35 个不常用命令
3. 更新侧边栏，显示领域分类
4. 更新文档和帮助

**预计时间**：1-2 天

---

## 💡 决策原则

**保留标准**：
1. 用户每周至少用 1 次
2. 是核心流程的一部分
3. 没有其他命令可以替代

**删除标准**：
1. 用户从来没用过
2. 功能重复
3. 可以用其他方式实现（如侧边栏右键菜单）

---

*这个文档是功能架构的"地图"，每次加功能前先看这个文档*
