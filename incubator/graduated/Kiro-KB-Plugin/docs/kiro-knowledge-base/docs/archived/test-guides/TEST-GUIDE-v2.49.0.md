# Kiro Knowledge Base v2.49.0 测试指南

**版本**: v2.49.0  
**功能**: 双知识库界面区分 (Dual KB Panel Separation)  
**日期**: 2026-01-07  
**VSIX 文件**: `kiro-knowledge-base-2.49.0.vsix` (194.55 KB)

## 安装步骤

1. **卸载旧版本**（如果已安装）
   - 打开 Kiro 扩展面板
   - 找到 "Kiro Knowledge Base" 插件
   - 点击卸载
   - 重启 Kiro

2. **安装新版本**
   - 在 Kiro 中按 `Ctrl+Shift+P`
   - 输入 "Extensions: Install from VSIX"
   - 选择 `kiro-knowledge-base/extension/kiro-knowledge-base-2.49.0.vsix`
   - 等待安装完成
   - 重启 Kiro

3. **验证安装**
   - 打开侧边栏，查看 Knowledge Base 图标
   - 检查版本号是否为 2.49.0

## 核心功能测试

### 1. 双区域面板布局测试

**目标**: 验证新的双区域布局是否正确显示

**步骤**:
1. 打开 Knowledge Base 侧边栏
2. 检查是否显示两个主要区域：
   - 📁 当前项目: [项目名]
   - ☁️ 中央知识库 (X)

**预期结果**:
- ✅ 显示两个独立的可折叠区域
- ✅ 当前项目区域默认展开
- ✅ 中央知识库区域默认折叠
- ✅ 两个区域之间有视觉分隔

**截图位置**: 保存到 `Kiro_Tu/v2.49.0-dual-panel.png`

---

### 2. 当前项目区域功能测试

**目标**: 验证当前项目区域的所有功能

**步骤**:
1. 展开 "📁 当前项目" 区域
2. 检查子节点是否包含：
   - 💬 对话整理 (如果有待整理对话)
   - 🔍 项目内搜索
   - 📂 文档浏览 (如果有知识文件)
   - 🔧 整理知识库

**测试项**:

#### 2.1 项目内搜索
1. 点击 "🔍 项目内搜索"
2. 选择搜索模式（关键词/语义）
3. 输入搜索关键词
4. 验证搜索结果仅来自当前项目

**预期结果**:
- ✅ 搜索界面正确打开
- ✅ 搜索结果标注 📁 图标（本地）
- ✅ 不包含中央知识库的结果

#### 2.2 文档浏览
1. 点击 "📂 文档浏览"
2. 查看按分类分组的文件列表
3. 点击某个文件

**预期结果**:
- ✅ 显示本地知识文件列表
- ✅ 点击后打开对应文件

#### 2.3 整理知识库
1. 点击 "🔧 整理知识库"
2. 查看整理建议

**预期结果**:
- ✅ 显示知识库整理状态
- ✅ 提供整理建议

---

### 3. 中央知识库区域功能测试

**目标**: 验证中央知识库区域的所有功能

**前提条件**: 
- 已配置中央知识库路径：`D:\G_GitHub\Kiro-Central-KB`
- 中央知识库包含一些知识文件

**步骤**:
1. 展开 "☁️ 中央知识库" 区域
2. 检查子节点是否包含：
   - 🔍 全局搜索
   - 💡 搜索建议
   - 📊 搜索统计
   - 🔥 热门知识
   - 📁 按项目浏览

**测试项**:

#### 3.1 全局搜索
1. 点击 "🔍 全局搜索"
2. 选择搜索模式
3. 输入搜索关键词
4. 验证搜索结果包含本地和中央知识库

**预期结果**:
- ✅ 搜索界面正确打开
- ✅ 搜索结果包含 📁 和 ☁️ 两种图标
- ✅ 结果来自所有知识库

#### 3.2 搜索建议
1. 展开 "💡 搜索建议"
2. 查看历史搜索建议

**预期结果**:
- ✅ 显示最近 5 条搜索建议
- ✅ 如果没有历史，显示 "暂无搜索历史"

#### 3.3 搜索统计
1. 点击 "📊 搜索统计"
2. 查看统计报告

**预期结果**:
- ✅ 显示搜索统计信息
- ✅ 包含搜索次数、热门关键词等

#### 3.4 热门知识
1. 展开 "🔥 热门知识"
2. 查看热门知识列表
3. 点击某个知识条目

**预期结果**:
- ✅ 显示访问次数最多的前 10 条知识
- ✅ 每个条目显示访问次数
- ✅ 点击后打开对应文件
- ✅ 如果没有访问记录，显示 "暂无访问记录"

#### 3.5 按项目浏览
1. 展开 "📁 按项目浏览"
2. 查看项目分组

**预期结果**:
- ✅ 按项目类型分组显示
- ✅ 显示每个项目的知识数量

---

### 4. 访问追踪功能测试

**目标**: 验证访问追踪是否正常工作

**步骤**:
1. 打开几个知识文件（通过面板或搜索）
2. 重新打开 Knowledge Base 侧边栏
3. 展开 "☁️ 中央知识库" → "🔥 热门知识"
4. 检查刚才打开的文件是否出现在列表中

**预期结果**:
- ✅ 打开的文件被记录
- ✅ 访问次数正确显示
- ✅ 按访问次数排序

---

### 5. 状态持久化测试

**目标**: 验证面板状态是否正确保存和恢复

**步骤**:
1. 展开 "📁 当前项目" 区域
2. 折叠 "☁️ 中央知识库" 区域
3. 关闭并重新打开 Kiro
4. 打开 Knowledge Base 侧边栏

**预期结果**:
- ✅ 当前项目区域保持展开状态
- ✅ 中央知识库区域保持折叠状态

---

### 6. 项目切换测试

**目标**: 验证切换项目时面板自动刷新

**步骤**:
1. 在当前项目中打开 Knowledge Base 侧边栏
2. 记录当前项目名称
3. 切换到另一个项目（File → Open Folder）
4. 查看 Knowledge Base 侧边栏

**预期结果**:
- ✅ 面板自动刷新
- ✅ "📁 当前项目" 显示新的项目名称
- ✅ 项目内搜索和文档浏览功能指向新项目

---

### 7. 配置选项测试

**目标**: 验证配置选项是否生效

**步骤**:
1. 打开设置（File → Preferences → Settings）
2. 搜索 "kiro-kb"
3. 找到以下配置项：
   - `kiro-kb.useDualPanelLayout` - 使用双区域面板布局
   - `kiro-kb.defaultExpandedSection` - 默认展开的面板区域

**测试项**:

#### 7.1 切换布局模式
1. 将 `useDualPanelLayout` 设置为 `false`
2. 重新加载窗口
3. 查看面板布局

**预期结果**:
- ✅ 切换回旧的单区域布局
- ✅ 所有功能仍然可用

#### 7.2 默认展开区域
1. 将 `useDualPanelLayout` 设置为 `true`
2. 将 `defaultExpandedSection` 设置为 `central`
3. 重新加载窗口
4. 查看面板

**预期结果**:
- ✅ 中央知识库区域默认展开
- ✅ 当前项目区域默认折叠

---

### 8. 向后兼容性测试

**目标**: 验证现有功能是否正常工作

**测试项**:
- ✅ 快捷键 `Ctrl+Alt+K` 仍然触发全局搜索
- ✅ 快捷键 `Ctrl+Alt+Q` 仍然触发暂存问题
- ✅ 快捷键 `Ctrl+Alt+C` 仍然触发智能捕获
- ✅ 收藏功能正常工作
- ✅ 标签功能正常工作
- ✅ 最近更新功能正常工作
- ✅ 设置面板正常工作

---

## 性能测试

### 9. 面板加载性能

**目标**: 验证面板加载速度

**步骤**:
1. 关闭 Knowledge Base 侧边栏
2. 记录时间
3. 打开 Knowledge Base 侧边栏
4. 记录面板完全加载的时间

**预期结果**:
- ✅ 面板在 500ms 内完成初始化
- ✅ 展开/折叠区域在 100ms 内完成
- ✅ 点击节点在 200ms 内响应

---

## 已知问题

### 问题 1: 搜索建议为空
**现象**: 展开 "💡 搜索建议" 显示 "暂无搜索历史"  
**原因**: 需要 searchHistory 实例传入，当前实现为占位符  
**影响**: 不影响其他功能  
**计划**: 在后续版本中完善

### 问题 2: 热门知识需要先打开文件
**现象**: 首次安装后 "🔥 热门知识" 为空  
**原因**: 需要先打开一些知识文件来建立访问记录  
**解决**: 正常使用几次后会自动填充

---

## 测试结果记录

### 测试环境
- **操作系统**: Windows 11
- **Kiro 版本**: [填写]
- **插件版本**: 2.49.0
- **测试日期**: 2026-01-07

### 测试结果

| 测试项 | 状态 | 备注 |
|--------|------|------|
| 1. 双区域面板布局 | ⬜ 待测试 | |
| 2.1 项目内搜索 | ⬜ 待测试 | |
| 2.2 文档浏览 | ⬜ 待测试 | |
| 2.3 整理知识库 | ⬜ 待测试 | |
| 3.1 全局搜索 | ⬜ 待测试 | |
| 3.2 搜索建议 | ⬜ 待测试 | |
| 3.3 搜索统计 | ⬜ 待测试 | |
| 3.4 热门知识 | ⬜ 待测试 | |
| 3.5 按项目浏览 | ⬜ 待测试 | |
| 4. 访问追踪 | ⬜ 待测试 | |
| 5. 状态持久化 | ⬜ 待测试 | |
| 6. 项目切换 | ⬜ 待测试 | |
| 7.1 切换布局模式 | ⬜ 待测试 | |
| 7.2 默认展开区域 | ⬜ 待测试 | |
| 8. 向后兼容性 | ⬜ 待测试 | |
| 9. 性能测试 | ⬜ 待测试 | |

**状态说明**:
- ⬜ 待测试
- ✅ 通过
- ❌ 失败
- ⚠️ 部分通过

---

## 问题反馈

### 🔧 故障排查

如果遇到问题，请先查看 [故障排查指南](./docs/20260108-troubleshooting-guide.md)

常见问题：
- 面板显示"没有可提供视图数据的已注册数据提供程序"
- 插件初始化失败
- 中央知识库路径配置问题

### 提交 Issue

如果发现问题，请记录以下信息：

1. **问题描述**: 
2. **复现步骤**: 
3. **预期行为**: 
4. **实际行为**: 
5. **截图**: 
6. **错误日志**: （打开 Output → Kiro Knowledge Base）

---

## 下一步

测试完成后：
1. 填写测试结果表格
2. 保存截图到 `Kiro_Tu/` 目录
3. 创建 `TEST-RESULTS-v2.49.0.md` 记录详细结果
4. 如果发现问题，创建 issue 或修复
5. 如果测试通过，准备发布

---

**测试人员**: [填写]  
**测试完成日期**: [填写]
