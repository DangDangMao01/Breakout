# Kiro 功能建议：跨设备 AI 上下文同步

**提交日期**：2026-01-08  
**提交人**：Kiro KB 插件开发者  
**优先级**：高  
**类型**：核心功能增强

---

## 📋 问题描述

### 当前痛点

Kiro AI 在跨设备使用时，**无法保持上下文连续性**，导致严重的用户体验问题：

1. **每次切换设备都需要重新解释项目背景**
   - 在公司电脑上讨论的架构设计
   - 回家后在个人电脑上继续开发
   - AI 完全不记得之前的对话内容

2. **AI 给出的建议可能与之前的设计决策冲突**
   - 设备 A：AI 建议使用方案 X
   - 设备 B：同一个 AI 建议使用方案 Y（完全相反）
   - 导致开发方向混乱，浪费大量时间

3. **开发效率大幅降低**
   - 需要反复向 AI 解释相同的背景信息
   - 无法建立长期的协作关系
   - 用户体验极差

### 实际案例

**场景 1：跨设备开发同一个项目**
```
周一（公司电脑）：
用户："我们的插件需要集成 Ollama，架构应该怎么设计？"
Kiro AI："建议使用 A 方案，理由是..."

周二（家里电脑）：
用户："继续昨天的 Ollama 集成开发"
Kiro AI："什么是 Ollama？你的项目是做什么的？"
用户：😤（需要重新解释一遍）
```

**场景 2：长期项目开发**
```
第 1 天：讨论了项目整体架构
第 2 天：AI 不记得架构，给出了冲突的建议
第 3 天：用户放弃使用 AI，因为每次都要重新解释
```

---

## 🎯 期望功能

### 核心需求：跨设备 AI 上下文同步

#### 1. 云端上下文存储

**功能描述**：
- 自动保存用户与 AI 的对话历史到云端
- 按项目/工作区自动分类存储
- 支持跨设备实时同步

**技术要点**：
- 基于 Git 仓库路径或工作区路径识别项目
- 使用向量数据库存储对话内容（支持语义搜索）
- 增量同步，减少网络开销

**隐私保护**：
- 用户可选择"本地模式"（不上传云端）
- 支持端到端加密
- 提供数据导出/删除功能

#### 2. 智能上下文恢复

**功能描述**：
- 切换设备时，AI 自动识别当前项目
- 加载相关的历史对话上下文
- 提供"继续上次对话"的快捷入口

**用户体验**：
```
用户在新设备上打开项目：
Kiro AI："检测到你在其他设备上讨论过这个项目，是否加载历史上下文？"
[加载上下文] [从头开始]

用户点击"加载上下文"后：
Kiro AI："好的，我记得你昨天在讨论 Ollama 集成的架构设计，
我们决定使用 A 方案。现在继续吗？"
```

#### 3. 上下文管理界面

**功能描述**：
- 用户可以查看所有项目的对话历史
- 支持编辑、删除、导出上下文
- 提供"重要对话"标记功能
- 支持手动关联/取消关联项目

**界面位置建议**：
- 在 Kiro 侧边栏添加"上下文管理"面板
- 或在设置中添加"AI 上下文"页面

---

## 💡 技术实现建议

### 方案 A：基于云端的完整方案（推荐）

**架构**：
```
Kiro Client (设备 A)
    ↓ 上传对话
Kiro Cloud (向量数据库 + 对象存储)
    ↓ 同步
Kiro Client (设备 B)
```

**技术栈**：
- 向量数据库：Pinecone / Weaviate / Qdrant
- 对象存储：S3 / OSS
- 同步协议：WebSocket / Server-Sent Events

**优点**：
- 完整的跨设备同步
- 支持语义搜索
- 可扩展性强

**缺点**：
- 需要云端基础设施
- 涉及隐私问题（需要加密）

### 方案 B：基于 Git 的轻量方案

**架构**：
```
Kiro Client → 保存上下文到 .kiro/context.json
    ↓ Git commit & push
Git Remote Repository
    ↓ Git pull
Kiro Client (其他设备) → 读取 .kiro/context.json
```

**优点**：
- 无需额外基础设施
- 利用现有 Git 工作流
- 隐私保护（用户控制仓库）

**缺点**：
- 需要手动 commit/push
- 不支持实时同步
- 依赖 Git 仓库

### 方案 C：混合方案（最佳平衡）

**架构**：
- 默认使用云端同步（方案 A）
- 提供"本地模式"（方案 B）
- 用户可自由切换

**配置示例**：
```json
{
  "kiro.ai.contextSync": {
    "mode": "cloud",  // "cloud" | "git" | "local"
    "encryption": true,
    "autoSync": true,
    "syncInterval": 60  // 秒
  }
}
```

---

## 📊 影响范围

### 受益用户群体

1. **跨设备开发者**（主要受益者）
   - 公司 + 家里双设备开发
   - 笔记本 + 台式机切换
   - 估计占 Kiro 用户的 **60-80%**

2. **长期项目开发者**
   - 需要 AI 记住项目历史
   - 建立长期协作关系
   - 估计占 Kiro 用户的 **80-90%**

3. **团队协作场景**
   - 多人共享项目上下文
   - 团队知识库
   - 未来扩展方向

### 竞品对比

| 功能 | Kiro (当前) | Cursor AI | GitHub Copilot | ChatGPT |
|------|-------------|-----------|----------------|---------|
| 跨设备上下文同步 | ❌ | ✅ (.cursorrules) | ⚠️ (部分) | ✅ (完整) |
| 项目级上下文 | ⚠️ (临时) | ✅ | ✅ | ❌ |
| 对话历史管理 | ❌ | ⚠️ (有限) | ❌ | ✅ |

**结论**：Kiro 在这方面**明显落后于竞品**，急需改进。

---

## 🚀 实施建议

### 阶段 1：MVP（最小可行产品）- 1-2 个月

**目标**：实现基本的跨设备上下文同步

**功能**：
- ✅ 云端存储对话历史
- ✅ 基于项目路径自动关联
- ✅ 切换设备时提示加载上下文
- ✅ 基本的隐私保护（加密）

**技术选型**：
- 使用现有云端基础设施
- 简单的 JSON 存储（不用向量数据库）
- 基于时间戳的同步

### 阶段 2：增强功能 - 2-3 个月

**目标**：提升用户体验和功能完整性

**功能**：
- ✅ 上下文管理界面
- ✅ 语义搜索（向量数据库）
- ✅ 本地模式支持
- ✅ 数据导出/导入

### 阶段 3：高级功能 - 3-6 个月

**目标**：差异化竞争优势

**功能**：
- ✅ 团队共享上下文
- ✅ 跨项目知识复用
- ✅ AI 主动提醒相关历史
- ✅ 上下文质量评分

---

## 📝 参考案例

### 1. Cursor AI 的 `.cursorrules` 文件

**优点**：
- 简单易用
- 基于文件，易于版本控制
- 团队共享方便

**缺点**：
- 只能存储规则，不能存储对话历史
- 需要手动编写

### 2. ChatGPT 的对话历史

**优点**：
- 完整的对话历史管理
- 跨设备无缝同步
- 支持搜索和分类

**缺点**：
- 不支持项目级隔离
- 隐私问题（所有数据在 OpenAI）

### 3. 我们的 Kiro KB 插件（临时方案）

**当前实现**：
- 保存对话到本地 Markdown 文件
- 通过 Git 手动同步
- 需要手动提醒 AI 读取历史

**问题**：
- 用户体验差（需要手动操作）
- 不是实时同步
- AI 不会主动加载上下文

**启示**：
- 用户确实有这个需求（我们的插件就是证明）
- 但第三方插件无法做到完美体验
- 需要官方深度集成

---

## 💰 商业价值

### 用户留存

- **当前**：用户因为上下文丢失而放弃使用 AI
- **改进后**：用户体验提升，留存率提高 **20-30%**（估计）

### 竞争优势

- **当前**：在上下文管理方面落后于 Cursor 和 ChatGPT
- **改进后**：成为差异化竞争优势

### 付费转化

- 可以作为**高级功能**：
  - 免费版：本地模式，有限的云端存储
  - 付费版：无限云端存储，团队共享

---

## 🙋 常见问题

### Q1：这会不会侵犯用户隐私？

**A**：提供多种模式供用户选择
- 云端模式：端到端加密，用户可随时删除
- 本地模式：数据完全不上传
- Git 模式：用户自己控制仓库

### Q2：实现成本高吗？

**A**：MVP 阶段成本不高
- 利用现有云端基础设施
- 简单的 JSON 存储即可
- 后续可逐步优化

### Q3：为什么不让第三方插件做？

**A**：第三方插件无法做到完美体验
- 无法访问 AI 的内部状态
- 无法实现无缝集成
- 用户体验差（需要手动操作）

### Q4：会不会影响 AI 性能？

**A**：可以优化
- 只加载相关的上下文（不是全部历史）
- 使用向量搜索找到最相关的对话
- 设置上下文长度限制

---

## 📞 联系方式

如有疑问或需要进一步讨论，请联系：

- **飞书群**：[你的飞书群名称]
- **邮箱**：[你的邮箱]
- **GitHub**：[你的 GitHub]

---

## 附录：我们的临时解决方案

我们开发了 **Kiro KB 插件**作为临时解决方案：
- GitHub：[你的仓库地址]
- 功能：保存对话历史、知识库管理、跨设备同步
- 用户反馈：功能有用，但体验不够好（需要手动操作）

**这个插件的存在本身就证明了用户需求的真实性。**

如果 Kiro 官方实现了这个功能，我们愿意：
1. 停止维护插件（如果官方方案完美）
2. 或者转型为增强功能（如果官方方案是基础版）
3. 或者开源给社区（作为参考实现）

---

**再次强调**：这是 Kiro 产品的**核心痛点**，不应该由第三方插件来解决。希望官方能够重视并尽快实现！

---

**提交日期**：2026-01-08  
**文档版本**：v1.0
