---
domain: ai-philosophy
tags: [steering-optimization, time-accuracy, location-tracking, cross-device]
date: 2026-01-30
time: "14:45" # 请用户确认
location: "公司"
source_project: "K_Kiro_Work"
related_discussions:
  - "20260130-今日对话总结.md"
  - "20260129-超长记忆上下文与AI自我唤醒完整方案.md"
value_score: 10
---

# 时间地点记录优化方案

> **问题**: Kiro 经常混淆时间和地点，导致跨设备上下文恢复时出现错误

**创建时间**: 2026-01-30  
**创建地点**: 公司

---

## 🔍 问题分析

### 发现的问题

1. **时间错乱**
   - 昨晚 7 点多完善测试 → Kiro 说"下午"
   - 今天在公司工作 → Kiro 说"在家里"
   - 无法区分"早上做的"和"晚上做的"

2. **根本原因**
   - ❌ Kiro 没有实时时间感知（只知道日期，不知道具体时间）
   - ❌ 文档中缺少时间戳记录
   - ❌ 文档中缺少地点上下文
   - ❌ Kiro 会猜测或推断时间和地点

3. **导致的后果**
   - 跨设备上下文恢复时，时间和地点信息不准确
   - 用户需要重复解释"什么时候做的"、"在哪里做的"
   - 降低了"真人感觉"

---

## 💡 解决方案

### 方案 1: 优化文档元数据 ⭐

**添加时间和地点字段**:

```yaml
---
domain: [领域]
tags: [标签列表]
date: YYYY-MM-DD
time: "HH:MM" # 24小时制，例如 14:30 或 19:30
location: "公司/家里/其他"
source_project: "K_Kiro_Work"
related_discussions:
  - "path/to/related/doc.md"
value_score: 1-10
---
```

**关键点**:
- `time`: 记录对话发生的具体时间（24小时制）
- `location`: 记录工作地点（公司/家里/其他）
- 这两个字段对于跨设备上下文恢复至关重要！

---

### 方案 2: 优化 Steering 规则 ⭐

**添加时间和地点的准确性规则**:

```
🚨 时间和地点的准确性：
- 读取文档后，**必须**检查 `time` 和 `location` 字段
- 回答时，**必须**使用文档中记录的准确时间和地点
- 不要猜测或推断时间和地点，只使用文档中的信息
- 如果文档中没有时间/地点信息，明确告诉用户"文档中未记录具体时间/地点"
```

**更新的文件**:
- `.kiro/steering/auto-kb-sync.md`
- `.kiro/steering/kb-link.md`

---

### 方案 3: 创建 Hook 提醒 ⭐

**新建 Hook**: `.kiro/hooks/record-time-location.json`

**功能**:
- 在对话结束时，自动提醒记录时间和地点
- 如果用户没有明确说明，主动询问："请问现在是什么时间？在哪里？"
- 不要猜测或推断，只使用用户提供的准确信息

**触发时机**: `onAgentComplete`（对话结束时）

---

## 📋 实施步骤

### Step 1: 更新 Steering 规则 ✅

- [x] 更新 `.kiro/steering/auto-kb-sync.md`
- [x] 更新 `.kiro/steering/kb-link.md`
- [x] 添加时间和地点的准确性规则

### Step 2: 创建 Hook ✅

- [x] 创建 `.kiro/hooks/record-time-location.json`
- [x] 配置触发条件和提醒消息

### Step 3: 更新现有文档 ✅

- [x] 更新 `knowledge-base/notes/20260130-今日对话总结.md`
- [x] 添加 `time` 和 `location` 字段

### Step 4: 测试验证 🔄

- [ ] 今晚在家里测试跨设备上下文恢复
- [ ] 验证时间和地点信息是否准确
- [ ] 记录测试结果

---

## 🎯 预期效果

### 优化前

**用户**: "今天做了什么？"

**Kiro**: "今天下午你完成了..." ❌（实际是晚上）

---

### 优化后

**用户**: "今天做了什么？"

**Kiro**: "今天晚上 7:30 左右，你在家里完成了..." ✅（准确）

---

## 📊 关键改进

| 维度 | 优化前 | 优化后 |
|------|--------|--------|
| **时间准确性** | ❌ 经常错误 | ✅ 准确到小时 |
| **地点准确性** | ❌ 经常混淆 | ✅ 明确记录 |
| **跨设备体验** | ⚠️ 需要重复解释 | ✅ 自动恢复上下文 |
| **真人感觉** | 6/10 | 9/10 |

---

## 🚀 下一步

### 今晚测试

**在家里测试时**:
1. 拉取中央知识库
2. 对 Kiro 说："今天做了什么？"
3. 验证 Kiro 是否能准确回答：
   - ✅ 时间：下午 2:30 左右
   - ✅ 地点：公司
   - ✅ 内容：Steering 规则优化 + 预判准确度探讨

### 持续改进

1. **收集反馈**
   - 记录时间和地点错误的案例
   - 分析错误原因

2. **优化规则**
   - 根据反馈调整 Steering 规则
   - 改进 Hook 的提醒逻辑

3. **扩展功能**
   - 考虑添加"时区"字段（如果跨时区工作）
   - 考虑添加"设备"字段（公司电脑/家里电脑）

---

## 💡 核心洞察

**"真人感觉"的关键 = 准确的时间和地点记忆**

人类记忆的特点：
- ✅ 记得"什么时候做的"（早上/下午/晚上）
- ✅ 记得"在哪里做的"（公司/家里）
- ✅ 能根据时间和地点推理上下文

Kiro 现在也能做到：
- ✅ 记录准确的时间和地点
- ✅ 读取文档时使用准确信息
- ✅ 不猜测或推断，只使用记录的信息

---

**创建时间**: 2026-01-30 14:45  
**创建地点**: 公司  
**意义**: 解决时间地点错乱问题，提升跨设备上下文恢复的准确性

