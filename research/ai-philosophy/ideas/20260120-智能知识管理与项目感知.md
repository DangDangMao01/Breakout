# 智能知识管理与项目感知改进方案

> 来源：2026-01-20 关于 LLM 认知编排和知识体系的讨论  
> 状态：待评估  
> 优先级：高

---

## 💡 核心想法

基于今天对 LLM 认知编排架构的讨论，提出以下改进方向：

### 1. 让 AI 主动管理知识库

**当前问题**：
- 用户需要手动判断对话是否有价值
- 手动保存到知识库
- 手动分类和更新索引

**改进方案**：
```
对话结束时，AI 自动：
1. 评估对话价值（1-5 分）
2. 如果 ≥ 3 分，建议保存位置
3. 自动生成摘要和标签
4. 更新 INDEX.md
```

**技术实现**：
- 在 Steering 规则中添加"对话结束时"的触发器
- 使用 LLM 分析对话内容和价值
- 调用文件系统 API 自动创建文档

---

### 2. 项目上下文感知

**核心需求**：
> "让 AI 分析出你现在拥有的项目，智能的把点子规划到相应的项目中"

**实现思路**：

#### 2.1 项目元数据
在每个项目根目录创建 `PROJECT.md`：
```markdown
# 项目名称
## 关键词
[关键词列表]
## 当前目标
[目标列表]
## 待实现想法
[想法列表]
```

#### 2.2 智能路由
AI 根据对话内容匹配项目：
```
对话主题：LLM 认知编排
匹配项目：kiro-knowledge-base（95%）
建议操作：保存改进方案到该项目
```

#### 2.3 主动提醒
打开项目时，AI 提醒：
```
"这个项目有 3 个未实现的想法：
1. 让 AI 主动管理知识库
2. 实现项目上下文感知
3. 建立知识成熟度分级

要基于哪个想法深入设计吗？"
```

---

### 3. 知识成熟度分级

**分级体系**：
```
Level 0: 对话记录（自动保存，定期清理）
Level 1: 草稿笔记（有价值但不完整）
Level 2: 完整文档（可以分享）
Level 3: 精华知识（进入中央知识库）
```

**自动流转**：
- AI 根据内容质量自动分级
- 定期提醒用户整理低级别内容
- 自动同步高级别内容到中央知识库

---

## 🎯 对 Kiro Knowledge Base 插件的影响

### 新增功能需求

#### 功能 1：对话价值评估
```typescript
interface ConversationValue {
  score: number;        // 1-5 分
  category: string;     // solutions/notes/discussions
  suggestedPath: string;
  summary: string;
  tags: string[];
}

async function evaluateConversation(
  conversation: Message[]
): Promise<ConversationValue>
```

#### 功能 2：项目匹配引擎
```typescript
interface ProjectMatch {
  projectName: string;
  projectPath: string;
  matchScore: number;   // 0-100
  relevantKeywords: string[];
}

async function matchProjects(
  conversationTopic: string
): Promise<ProjectMatch[]>
```

#### 功能 3：智能提醒系统
```typescript
interface ProjectReminder {
  projectName: string;
  pendingIdeas: Idea[];
  lastUpdate: Date;
}

async function checkProjectReminders(
  projectPath: string
): Promise<ProjectReminder>
```

---

## 🛠️ 技术架构调整

### 当前架构
```
VSCode Extension
├─ 监听对话事件
├─ 保存到知识库
└─ 更新索引
```

### 改进后架构
```
VSCode Extension
├─ 对话监听层
│  ├─ 实时记录对话
│  └─ 对话结束时触发评估
│
├─ 智能分析层
│  ├─ 价值评估引擎
│  ├─ 项目匹配引擎
│  └─ 知识分级引擎
│
├─ 知识管理层
│  ├─ 自动保存
│  ├─ 智能分类
│  └─ 索引更新
│
└─ 项目感知层
   ├─ 项目扫描
   ├─ 元数据管理
   └─ 主动提醒
```

---

## 📋 实施计划

### Phase 1：基础能力（1-2 周）
- [ ] 实现对话价值评估
- [ ] 自动保存和分类
- [ ] 自动更新索引

### Phase 2：项目感知（2-3 周）
- [ ] 设计 PROJECT.md 格式
- [ ] 实现项目扫描和匹配
- [ ] 实现智能路由

### Phase 3：主动提醒（1-2 周）
- [ ] 项目打开时检查待办想法
- [ ] 实现提醒 UI
- [ ] 实现想法管理界面

### Phase 4：知识分级（2-3 周）
- [ ] 实现知识成熟度评估
- [ ] 实现自动流转机制
- [ ] 实现定期整理提醒

---

## 🎓 参考资料

### 相关讨论
- `knowledge-base/notes/20260120-LLM认知编排系统架构详解.md`
- 今天关于"如何让 AI 更像人"的讨论

### 技术参考
- LLM 认知编排架构（Feedback Loop, Judge & Route, Reason & Plan）
- VSCode Extension API
- MCP (Model Context Protocol)

---

## 💭 待讨论的问题

1. **项目元数据格式**：
   - PROJECT.md 应该包含哪些字段？
   - 如何平衡详细度和维护成本？

2. **匹配算法**：
   - 如何准确匹配对话和项目？
   - 匹配阈值设置为多少合适？

3. **用户体验**：
   - 提醒的频率和时机？
   - 如何避免打扰用户？

4. **性能考虑**：
   - 项目扫描的性能影响？
   - 如何缓存项目元数据？

---

## 🚀 预期效果

实现后，用户体验将是：

```
场景 1：讨论技术方案
你: [和 AI 讨论 LLM 架构]
AI: "这个讨论和 kiro-knowledge-base 项目相关，
     要保存改进方案吗？"
你: "保存"
AI: [自动创建文档，更新项目 TODO]

场景 2：打开项目
你: [打开 kiro-knowledge-base 项目]
AI: "这个项目有 3 个待实现的想法，
     要基于'智能知识管理'这个想法
     重新设计架构吗？"
你: "好"
AI: [加载相关讨论，开始深入设计]

场景 3：知识流转
AI: "你的 drafts/ 里有 5 篇笔记
     已经完善到可以发布的程度，
     要移到 solutions/ 吗？"
```

---

**创建时间**：2026-01-20  
**创建者**：基于与用户的讨论  
**下一步**：评估可行性，制定详细设计方案
