# 知识管理架构

**更新时间**: 2026-01-29

---

## 🏗️ 三层架构

```
┌─────────────────────────────────────────────────────────────────┐
│                    🌐 中央知识库（跨项目）                        │
│              D:\G_GitHub\Kiro-Central-KB                        │
│                                                                 │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │  INDEX.md - 全局索引                                      │  │
│  │  PROJECT-INDEX.md - 按项目索引                            │  │
│  └──────────────────────────────────────────────────────────┘  │
│                                                                 │
│  ┌──────────────┬──────────────┬──────────────┬─────────────┐  │
│  │ solutions/   │ notes/       │ discussions/ │ projects/   │  │
│  │ 技术方案     │ 笔记         │ 讨论记录     │ 按项目分类  │  │
│  └──────────────┴──────────────┴──────────────┴─────────────┘  │
│                                                                 │
│  projects/                                                      │
│  ├── K_Kiro_Work/          # 来自 K_Kiro_Work 的知识          │
│  ├── Kiro-KB-Plugin/       # 来自 Kiro-KB-Plugin 的知识       │
│  └── DevBrain-App/         # 来自 DevBrain-App 的知识         │
└─────────────────────────────────────────────────────────────────┘
                             ▲
                             │ 同步
                             │
┌─────────────────────────────────────────────────────────────────┐
│                    📁 项目本地知识库（临时）                      │
│                                                                 │
│  K_Kiro_Work/knowledge-base/                                   │
│  ├── solutions/            # 临时保存                          │
│  ├── notes/                # 临时保存                          │
│  └── discussions/          # 临时保存                          │
│                                                                 │
│  Kiro-KB-Plugin/knowledge-base/                                │
│  └── ...                   # 已同步到中央知识库                │
│                                                                 │
│  DevBrain-App/knowledge-base/                                  │
│  └── ...                   # 将来同步到中央知识库              │
└─────────────────────────────────────────────────────────────────┘
                             ▲
                             │ 不同步
                             │
┌─────────────────────────────────────────────────────────────────┐
│                    📋 项目管理文档（独立）                        │
│                                                                 │
│  K_Kiro_Work/incubator/                                        │
│  ├── active/               # 活跃项目                          │
│  │   └── DevBrain-App/                                         │
│  │       ├── README.md    # 项目概述                           │
│  │       ├── research/    # 市场调研                           │
│  │       └── NEXT-STEPS.md # 下一步行动                        │
│  └── graduated/            # 已毕业项目                        │
│      └── Kiro-KB-Plugin/                                       │
│          ├── README.md    # 项目总结                           │
│          └── docs/        # 历史文档                           │
└─────────────────────────────────────────────────────────────────┘
```

---

## 📚 三个"知识库"的区别

### 1. 中央知识库（Kiro-Central-KB）

**定位**: 跨项目的知识中枢

**特点**:
- ✅ 独立的 Git 仓库
- ✅ 跨项目共享
- ✅ 跨设备同步
- ✅ 永久保存
- ✅ 统一索引

**内容**:
- 所有项目的对话记录
- 技术方案和解决方案
- 讨论和思考
- 笔记和总结

**元数据**:
```yaml
source_project: "K_Kiro_Work"
source_project_type: "ta-tools"
date: 2026-01-29
tags: [...]
```

**用途**:
- 避免跨项目上下文断裂
- 避免重复讨论
- 知识复用
- 历史追溯

---

### 2. 项目本地知识库（knowledge-base/）

**定位**: 临时的本地知识库

**特点**:
- ✅ 在项目仓库中
- ✅ 演示知识库的使用
- ✅ 临时保存对话
- ❌ 不跨项目共享
- ❌ 不跨设备同步

**内容**:
- 当前对话的临时保存
- 等待同步到中央知识库

**生命周期**:
```
创建 → 临时保存 → 同步到中央知识库 → 可选删除
```

**用途**:
- 对话结束时的临时存储
- 演示知识库的结构
- 本地快速访问

---

### 3. 项目管理文档（incubator/）

**定位**: 项目策划和管理文档

**特点**:
- ✅ 在项目仓库中
- ✅ 项目管理专用
- ❌ 不是"知识库"
- ❌ 不同步到中央知识库

**内容**:
- 项目概述和定位
- 市场调研和竞品分析
- 目标用户和商业模式
- 开发计划和下一步行动
- 项目历史文档

**用途**:
- 项目孵化管理
- 策划和设计
- 市场分析
- 项目追踪

---

## 🔄 工作流程

### 对话结束后

```
1. Kiro 对话结束
   ↓
2. 保存到项目本地知识库
   K_Kiro_Work/knowledge-base/notes/20260129-xxx.md
   ↓
3. 手动同步到中央知识库
   D:\G_GitHub\Kiro-Central-KB\notes\20260129-xxx.md
   ↓
4. 添加元数据
   source_project: "K_Kiro_Work"
   related_discussions: [...]
   ↓
5. 更新中央知识库索引
   INDEX.md
   PROJECT-INDEX.md
   ↓
6. （可选）删除本地副本
   或保留并添加同步说明
```

### 项目管理文档

```
1. 创建项目
   ↓
2. 在 incubator/ 创建项目文档
   incubator/active/ProjectName/
   ├── README.md
   ├── research/
   └── NEXT-STEPS.md
   ↓
3. 持续更新项目文档
   （不同步到中央知识库）
   ↓
4. 项目毕业后
   移动到 incubator/graduated/
   保留历史文档
```

---

## 📊 对比表

| 特性 | 中央知识库 | 项目本地知识库 | 项目管理文档 |
|------|-----------|---------------|-------------|
| **路径** | `D:\G_GitHub\Kiro-Central-KB` | `knowledge-base/` | `incubator/` |
| **Git 仓库** | 独立仓库 | 在项目仓库中 | 在项目仓库中 |
| **跨项目** | ✅ 是 | ❌ 否 | ❌ 否 |
| **跨设备** | ✅ 是 | ❌ 否 | ❌ 否 |
| **永久性** | ✅ 永久 | ⚠️ 临时 | ✅ 永久 |
| **内容** | 对话、方案、讨论 | 临时对话 | 策划、调研 |
| **用途** | 知识管理 | 临时存储 | 项目管理 |
| **同步** | 目标 | 来源 | 不同步 |

---

## 🎯 最佳实践

### 1. 对话保存

**立即保存到**:
- 项目本地知识库（`knowledge-base/`）

**稍后同步到**:
- 中央知识库（`D:\G_GitHub\Kiro-Central-KB`）

**不要保存到**:
- 项目管理文档（`incubator/`）

### 2. 项目文档

**保存到**:
- 项目管理文档（`incubator/`）

**不要保存到**:
- 中央知识库（`D:\G_GitHub\Kiro-Central-KB`）
- 项目本地知识库（`knowledge-base/`）

### 3. 技术方案

**保存到**:
- 项目本地知识库（`knowledge-base/solutions/`）
- 同步到中央知识库（`D:\G_GitHub\Kiro-Central-KB\solutions/`）

**可选保存到**:
- 项目管理文档（`incubator/active/ProjectName/research/`）
  - 如果是项目专属的技术调研

---

## 🚀 未来改进

### Phase 1: 手动同步（当前）
- 对话结束后手动复制
- 使用 `scripts/sync-to-central-kb.md` 指南

### Phase 2: Hook 自动同步
- 创建 Kiro Hook
- 对话结束时自动同步
- 自动添加元数据

### Phase 3: 插件自动同步
- Kiro-KB-Plugin 或 DevBrain-App
- 自动检测和同步
- 智能去重和合并

---

**创建时间**: 2026-01-29  
**维护者**: DangDangMao  
**用途**: 明确三个"知识库"的区别和用途
