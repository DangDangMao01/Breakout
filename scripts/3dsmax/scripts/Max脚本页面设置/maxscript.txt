/***
Create MaxScript .api file for use with the automcomplete feature of the MaxScript editor.

Created by:
James Haywood
http://apps.jhaywood.com/blog/
***/

	filteredSS = stringstream ""
	ss = stringstream ""
	
	apropos "" to:ss
	seek ss 0
	while not eof ss do
	(
		l = readLine ss
	
		if matchPattern l pattern:"*#struct:*" then
		(
			n = (filterString l " ")[1]
			l = readLine ss
			while matchPattern l pattern:"*public,*" do
			(
				format "%.%\n" n (trimLeft (filterString l ":")[1] " ") to:filteredSS
				l = readLine ss
			)
		)
		else if matchPattern l pattern:"*(const *" then
		(
			format "%\n" (filterString l " ")[1] to:filteredSS
		)
	)
	
	filePath = getDir #maxRoot + @"\maxscript.api"
	if not doesFileExist filePath then 
	(
		createFile filePath
	)
	if getFileAttribute filePath #readOnly then
	(
		setFileAttribute filePath #readOnly false
	)
	fStream = openFile filePath mode:"w+"
	format "%" (filteredSS as string) to:fStream
	close fStream
	edit filePath
	#???max???
#!!!DONT EDIT ABOVE THIS LINE !!!

# has no effect in 3ds Max`s(old) Scintilla version --?max???????
find.use.strip=1
replace.use.strip=1



#disable auto-intend of opening and closing brackets--??????????????
indent.automatic=1
indent.opening=0
indent.closing=0
indent.maintain.filepatern=0

title.show.buffers=0

#Give symbolic names to the set of fonts used in the standard styles.--??????????????????
foot.base=font:????,size:11--???????????????
----font.base=font:Soure code Pro Black,size:11  --???????
font.small=font:Consolas,size:10  --?????????

font.comment=font:Segeo UI,size:10 --????
font.code.comment.box=$(font.comment)
font.code.comment.line=$(font.comment)
font.code.comment.dcc=$(font.comment)
font.code.comment.nested=$(font.comment)

font.text=font:Segeo UI,size:11
font.texe.comment=font:Segeo UI.size:11,italics

font.embedded.base =font:Segeo UI,size : 11,italics 
font.embedded.comment=font:Comic Sans MS ,size:8

font.monospace=font:Consolas,size:18--?????

#Give symbolic names to the set of colours used in the standard styles.
colour.global.back=#14171c---??????
colour.global.fore=#abb9c3--??????

colour.code.comment.line=fore:#484848--???????
#~~colour.code.comment.line=fore:#ff0000
colour.code.comment.box=fore:#484848--???????
colour.code.comment.doc=$(colour.code.comment.box)
colour.code.comment.nested=$(colour.code.comment.box)
colour.text.comment=$(colour.code.comment.box)
colour.other.comment=$(colour.code.comment.box)
colour.embedded.comment=$(colour.code.comment.box)
colour.notused=back:#FF0000

colour.brace.highlight=fore:#0047e9
colour.brace.incomplete=fore:#AA0000

colour.indentationguide=fore:#:404040,back:$(colour.global.back)--???????

colour.linenumbers=back:#000000,fore:#353535--?????????

colour.whitespace=fore:#0363e7--#?
colour.foldmargin=$(colour.indentationguide)

fold.margin.colour=#202020
fold.margin.highlight.colour=#000000


colour.number=fore:#a1601f--??
colour.keyword=fore#0181fe--??????
colour.reserved=fore#FF0000
colour.string=fore:#31a188--???
colour.string.verbatim=fore:#FF0000
colour.string.open=fore:#FFBBBB.back:#730000--?????
colour.char=fore:#ff8182
colour.operator=fore:#893610--???????+â€”/*
colour.argument=fore:#ff0164--title??
#3983E6

colour.preproc=fore:#228f3c--???

colour.pathname=fore:#59B344--???
colour.function = fore:#61a131--messagbebox ???
colour.class=fore:#862dff--color?????
colour.maxclass=fore:60A030--MAX?????
colour.superclass=fore:#7e82ff--max???????
colour.coreinterface=fore:#4479D6
colour.objectset=fore:#d503d8
colour.struct=fore:#61a131--dotnet??
colour.constantglobals=fore:#049488--????true/flase
colour.globals=fore:#b84084
colour.user=fore:#FF0000,bold,italics 

#caret color and settings 
caret.fore=#AFAFAF
caret.width=2
caret.line.back=#FFFFFF
caret.line.back.alpha=16

#selection color and settings 
selection.fore=#606060
selection.back=#ff0000
selection.alpha=100


#Maxscript.properties style overrides(those override the properties in maxscript.priperties)

#Line Number
style.MAXScript.33=$(colour.linenumbers),$(font.small)

#Brace highlight
style.MAXScript.34=$(colour.brace.highlight),bold

#Brace incomplete highlight
style.MAXScript.35=$(colour.brace.incomplete),Body_Utility

#Control characters 
style.MAXScript.36=

#Indentation guides 
style.MAXScript.37=$(colour.indentationguide)
    

#########################


#Default
style.MAXScript.32=$(font.base),back:$(colour.global.back),fore:$(colour.global.back),fore:$(colour.global.fore)
#
# White space
style.MAXScrpt.0=$(colour.whitespace)
# Comment:/* */.
style.MAXScript.1=$(colour.code.comment.box),$(font.code.comment.box)
# Line Comment:--.
style.MAXScript.2=$(colour.code.comment.line),$(font.code.comment.line),eolfilled
# Number
style.MAXScript.3=$(colour.number)
# String
style.MAXScript.4=$(colour.string)

# Verbatim Strings 
style.MAXScript.5=$(colour.string.verbatim),eolfilled

# End of line where string is not Closed 
style.MAXScript.6=$(colour.string.open)eolfilled

# Identifiers
style.MAXScript.7=

# Operators
style.MAXScript.8=$(colour.operator)
#,bold 

# Keyword arg name 
style.MAXScript.9 =$(colour.argument),IDataChannelEngineClass

# Name Value
style.MAXScript.10=$(colour.char)

# pathname
style.MAXScript.11=$(colour.pathname),$(font,monospace)

# Keywords1 - Keywords
style.MAXScript.12=$(colour.keyword),bold 

# Keywords2 - Rollout controls 
style.MAXScript.13=$(colour.preproc),bold 
# Keyword3 - Functions  
style.MAXScript.14=$(colour.function)

# Keywords4 - MAXClasses
style.MAXScript.15 = $(colour.class)

# Keywords5 - MAXClasses
style.MAXScript.16=$(colour.maxclass)

# Keywords6 - MAXSuperClasses
style.MAXScript.17 = $(colour.superclass)

# Keywords7 - Core interfaces 
style.MAXScript.18 = $(colour.coreinterface)
#,italics 

# Keyword8 - Object sets 
style. MAXScript.19 = $(colour.objectset)
# italics 

# keywords9 - StructDefs 
style.MAXScript.20=$(colour.struct)
# ,italics 

# Keywords10 - Const reserved globals 
style.MAXScript.21 =$(colour.constantglobals)
# italics 

# Keywords11 - Reserved globals 
style.MAXScript.22 = $(colour.globals)

# Keywords12 - User defind 
style.MAXScript.23=$(colour.user),bold,italics 

# ????????
colour.string.verbatim=fore:#CB7A7A
# Autocomplete
autocompleteword.automatic=1
autocomplete.*.ignorecase=1
autocomplete.choose.single=0
autocomplete.*.start.characters=$(chars.alpha)$(chars.numeric)$_@#.
api.*.ms=maxscript.api
 
# Editor Behavior
# home key goes to far left beginning of line
vc.home.key=0
# open up to 20 files at once
buffers=20
# show file tabs on multiple lines
tabbar.multiline=1
# highlighted a file name in a script and open that file using Ctrl-Shift-O
# I use this with files Im adding to a script using include or fileIn
openpath.*.ms=<my script functions folder>
open.suffix.*.ms=.ms
# Ctrl-O defaults to the directory of the currently active file
open.dialog.in.file.directory=1

